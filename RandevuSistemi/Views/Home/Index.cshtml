@{
    ViewData["Title"] = "Home Page";
}
@section Styles{
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="~/lib/fullcalendar/main.css" rel="stylesheet" />
}
<div class="row">
    <div class="col-md-2">
        <div id="otherEvents">
            <p><strong>Diğer Eventler</strong></p>
            <div class="fc-event">1. Etkinlik</div><br />
            <div class="fc-event">2. Etkinlik</div><br />
        </div>
    </div>
    <div class="col-md-10">
        <div id="calendar">


        </div>
    </div>
</div>






@section Scripts {

    <script src="~/lib/fullcalendar/main.js"></script>
    <script src="~/lib/fullcalendar/locales/tr.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded',
            function () {
                var calendarEl = document.getElementById('calendar');

                var draggableEl = document.getElementById('otherEvents');

                var Draggable = FullCalendar.Draggable;
                let draggable = new Draggable(draggableEl,
                    {
                        itemSelector: '.fc-event',
                        eventData: function (eventEl) {
                            return {
                                title: eventEl.innerText,
                                duration: '01:30'
                            };
                        }
                    });


                var calendar = new FullCalendar.Calendar(calendarEl,
                    {
                        headerToolbar: { center: 'title', left: 'prev next today addEvent', right: 'dayGridMonth timeGridWeek,timeGridDay,timeGridFourDay listDay,listWeek' }, // buttons for switching between views
                        footerToolbar: { left: 'prevYear', right: 'nextYear' },
                        //handleWindowResize: true,
                        //windowsResizeDelay: 100,
                        //windowResize: function(view) {

                        //},
                        contentHeight: 650,
                        themeSystem: 'bootstrap',
                        droppable:true,
                        bootstrapFontAwesome: {
                            nextYear: 'fa-angle-double-right',
                            prev: 'fa-chevron-left',
                            next: 'fa-chevron-right',
                            dayGridMonth: 'fa-calendar'
                        },
                        locale: 'tr',
                        nowIndicator: true,
                        dayHeaderFormat: {
                            weekday: 'long'
                        },
                        slotDuration: '00:30:00',
                        slotLabelInterval: '01:00:00',
                        slotLabelFormat: {
                            hour: '2-digit',
                            minute: '2-digit',
                            omitZeroMinute: false,
                            meridien: 'long'
                        },

                        allDaySlot: false,
                        titleFormat: { year: 'numeric', month: 'long', day: 'numeric' },
                        views: {
                            dayGridMonth: {},
                            timeGridWeek: {},
                            timeGridFourDay:
                            {
                                type: 'timeGrid',
                                dayCount: 4,
                                buttonText: '4 Gün'
                            },
                            listWeek: {
                            },
                            listDay: {
                                buttonText: 'Günlük'
                            },


                        },
                        customButtons: {
                            addEvent: {
                                text: 'Ekle',
                                click: function () {
                                    var newEvent = {
                                        id: 'a',
                                        title: 'Yeni Event',
                                        start: '2020-12-03T11:00:00.000Z',
                                        end: '2020-12-03T12:30:00.000Z'
                                    }

                                    calendar.addEvent(newEvent);
                                }
                            }
                        },
                        businessHours: {
                            // days of week. an array of zero-based day of week integers (0=Sunday)
                            daysOfWeek: [1, 2, 3, 4, 5], // Monday - Thursday

                            startTime: '08:00', // a start time (10am in this example)
                            endTime: '17:00', // an end time (6pm in this example)
                        },
                        //eventColor: 'pink',
                        eventBackgroundColor: 'white',
                        eventBorderColor: 'red',
                        eventTextColor: 'black',
                        //eventTimeFormat: {
                        //    hour: '2-digit',
                        //    minute: '2-digit',
                        //    second:''
                        //},
                        displayEventTime: false,
                        buttonText: {

                            //prev: 'önceki',
                            //next: 'sonraki'

                        },
                        slotMinTime: '07:00:00',
                        slotMaxTime: '22:00:00',
                        defaultView:
                            'dayGridMonth',
                        weekends:
                            true,
                        //initialDate: '2020-10-10',
                        //validRange: {
                        //    start:'2020-09-01'
                        //},
                        timeZone: 'UTC',
                        events: [
                            {
                                id: 'x',
                                title: 'Merhaba',
                                start: '2020-12-04T08:00:00.000Z',
                                end: '2020-12-04T12:00:00.000Z'
                            },
                            {
                                id: 'xy',
                                title: 'Toplantı',
                                start: '2020-12-05T10:00:00.000Z',
                                end: '2020-12-05T12:00:00.000Z'
                            }
                        ],
                        //eventRender: function(info) {

                        //},
                        selectable: true,
                        select: function (selectionInfo) {
                            //console.log(selectionInfo);
                        },
                        eventClick: function (info) {
                            alert(info.event.title);
                        },
                        //eventMouseEnter: function(onMouse) {
                        //    alert(onMouse.event.id);
                        //},
                        //eventMouseLeave: function (leaveMouse) {
                        //    alert(leaveMouse.event.id);
                        //},
                        editable: true,
                        //eventStartEditable: true,
                        //eventDurationEditable: true,
                        eventDragMinDistance: 5,
                        dragRevertDuration: 750,
                        //dragScroll: true,
                        snapDuration: '00:30:00',
                        //eventOverlap: function(stillEvent, movingEvent) {
                        //    return stillEvent.allDay && movingEvent.allDay;
                        //},
                        //eventConstraint: {
                        //    startTime: '09:00',
                        //    endTime: '18:00',
                        //    daysofWeek: [1, 2, 3, 4, 5]
                        //},
                        //eventAllow: function(dropInfoEvent, draggedEvent) {
                        //    //kontrollü sürkle bırak
                        //}
                        eventDragStart: function (info) {
                            //başladı...
                        },
                        eventDragStop: function (info) {
                            //bitti...
                        },
                        eventDrop: function (eventDropInfo) {
                            //event - oldEvent - revert()
                        },


                        eventResizeStart: function (info) {
                            //yeniden boyut verme başladı...
                        },
                        eventResizeStop: function (info) {
                            //yeniden boyut verme başladı...
                        },
                        eventResize: function (eventResizeInfo) {
                            //event prevEvent revert()
                        },
                        drop: function(dropInfo) {
                            //allday, date, datestr, draggedEl
                        },
                        eventRecieve: function(info) {
                            //event , draggedEl
                        },
                        eventLeave: function(info) {
                            //Takvimler arası sürükleme
                        },
                        dropAccept:'.fc-event'


                    });
                calendar.render();

                var events = calendar.getEvents();
                console.log(events);

                var id = 'x';
                var event = calendar.getEventById(id);
                console.log(event);


            });
            //calendar.render());

    </script>
}